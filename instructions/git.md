#Git workflow

##Основные ветки

**master** — основная ветка разработки проекта

**product** — ветка, в которой хранятся релизы продукта

![Historical branches](img/git-workflow-release-cycle-1historical.png)

##Feature branches

Для разработки каждой новой задачи программист должен создавать новую локальную ветку. В эту ветку программист будет комитить все изменения. Ветка должна быть создана на базе текущей ветки разработки — `master`. Когда задача закончена ветка должна быть слита с `master`.

![Feature branches](img/git-workflow-release-cycle-2feature.png)

##Release branches

Как только разработано достаточно функциональности для релиза, либо наступила предопределенная дата релиза, из master создается release branch. Создание этой ветки означает переход к следующему циклу разработки, в эту ветку не добавляют новую функциональность, только — исправления ошибок, документацию и другие задачи необходимые для релиза. Как только релиз готов для поставки все изменения сливаются в ветку product и устанавливается тег с номером версии. Кроме того, эта ветка должна быть слита с веткой master. 
Использование выделенной ветки для подготовки релиза необходимо для того, чтобы отшлифовать версию продукта не прекращая разработку новой функциональности. Названия веток должны быть в формате: release-*.

![Release branches](img/git-workflow-release-cycle-3release.png)

##Общее описание процесса

###Общие правила:

 - Текущая рабочая версия кода всегда хранится в ветке master
 - Все законченные релизы хранятся в ветке product (опционально) либо в `master`
 - Для обозначения релиза используется `git tag`. В GitHub есть специальная вкладка Release, в которой можно просматривать и создавать релизы.
 - Для Release Candidate используется новая выделенная ветка. Имя ветки задается в формате release-номер релиза
 - Все обновления в master, product ветках происходят через pull requests для большинства проектов и команд, либо через rebase ветки с новой функциональностью на master и последующим слиянием master с веткой — в отдельных случаях.
 - Если ветка с новой функциональностью уже слита с мастером или создан pull request ветку необходимо удалить.

###Git workflow состоит и следующих шагов:

 - Выполнить `git pull` для того, чтобы обновить локальный `master`
 - Создать ветку для новой функциональности: `git checkout -b new_branch_name
 - Разработать функционал с ранними и частыми комитами в собственную ветку.
 - Периодически обновлять локальный `master` и после делать `git rebase` на `master` для того чтобы сливать изменения из основного репозитория.
 - Сжать все локальные комиты в один или несколько c помощью `git rebase -i` (опционально)
 - Слить изменения с локальный `master` либо отправить pull request
 - Отправить изменения в основной репозитрий (push) либо слить pull request

![Maintenance](img/git-workflow-release-cycle-4maintenance.png)
